{%extends 'base.html'%}
{%block title%}{{user.fname}}'s Profile{%endblock%}

{%block body%}
<div class="container">
<div class="user_info">
<h1>Name: {{user.fname}} {{user.lname}}</h1>
<h3>Email: {{user.email}}</h3>
</div>
<br>
<br>
<div class="headshot-container">
<h3>Headshot Gallery:
  {%if not user.headshots%}
  <h2>Upload your first headshot!</h2>
  {%else%}
  <ul>  
    {%for image in user.headshots%}
  <li>
  <img class="card-img-top" src="{{image.img}}" alt="Card image cap"><br>
  {%if image.show_id == none %}
  Currently Published In: No Show Assigned <br>
    {%else%}
  Currently Published In: {{image.shows.title}} <br>
  {%endif%}
  Headshot_Id: {{image.headshot_id}}<br>
<label for="showPicker">Select A Show</label>
<form action="/add_headshot_to_show" method="POST">
  <select id="showPicker" name="showPicker">
    {%for show in user.cast%}
    <option value="{{show.show_id}} {{image.headshot_id}}">{{show.shows.title}}</option>
    {%endfor%}
    <input type="submit">
    <button type="button" class="btn btn-outline-danger">Danger</button>
</select>
</form>
</li>
{%endfor%}
</ul>
{%endif%}
      <label for="add_headshot">Add Headshot:</label>    
      <form action="/add_headshot/{{user.user_id}}" method="POST" enctype="multipart/form-data">
          <input id="add_headshot" type="file" name="headshot">
          <input type="submit">
      </form>
</h3>
</div>

<div class="bio-container">
<h2>Bio: </h2>
      {%if user.bios %}
      <ul class="bios">
              {%for bio in user.bios%}
          <li>
          {{bio.bio}}<br>
          Currently Published In: {{bio.shows.title}} <br>
          <label for="showPicker">Select A Show</label>
          <form action="/add_bio_to_show" method="POST">
            <select id="showPicker" name="showPicker">
              {%for show in user.cast%}
              <option value="{{show.show_id}} {{bio.bio_id}}">{{show.shows.title}}</option>
              {%endfor%}
              <input type="submit">
          </select>
        </form>
        </li>
    {%endfor%}
  </ul>
    {%endif%}

    <label for="add_bio">Add Bio</label>
    <form action="/add_bio/{{user.user_id}}" id="add_bio" method="POST">
      <input type="textbox" name="bio" required>
      <input type="submit">
    </form>

  </div>


<h2>Shows:</h2>
<ul>
    {%for show in user.cast%}
    <li>
    {{show.shows.title}} Role: {{show.role}} ADMIN: {{show.admin}}
    {%if show.admin == True%}
    <button type="submit"><a href="/cast/{{show.show_id}}">Add Cast</a></button>
    {%endif%}
    </li>
    {%endfor%}
</ul>
</div>
{%endblock%}
</div>
